## mysql数据库层的优化
如果流量穿透了数据库缓存层，就要请求mysql数据库服务器了，如果流量很大的话，需要对mysql一些内容进行一定的优化
### 相关概念
	1. 优化方向
		- 数据表数据类型优化
			- 字段使用什么样的数据类型更合适，性能更快
			- tinyint（年龄） smallint（古建筑，古树的年龄） bigint 按需选择存储类型，考虑空间问题（年龄非负unsigned），范围的问题
			- char（空间效率） varchar 存储字符串长度是否固定
			- enum存储，效率更快：特定、固定的分类，但是扩展性比较差
			- ip地址：整型来存ip2long，long2ip
		- 索引优化
			- 建立合适的索引
			- 创建的原则：不是越多越好，在合适的字段上创建合适的索引，索引会影响写操作，占用磁盘空间，会提高查询速度（在where列上创建等）；
			- 复合索引的前缀原则
			- like查询%在前会失效
			- 全表扫描优化 100条记录 查98条，查询若使用索引的话，会先去看索引再去看数据。mysql优化器就会放弃使用索引
			- or条件索引前边列有索引，后边没有索引就不会使用索引了
			- 字符串类型索引失效的问题 字符串存的是整形，查询时不加引号会失效
		- sql语句的优化
			- 优化查询过程中的数据访问
				- 使用limit，列不用*
			- 优化长难句的查询语句
				- 变复杂为简单，切分查询（分批查询），分解关联查询（有利于做数据层面的缓存）
			- 优化特定类型的查询语句
				- 优化count()：count(*)在myisam表中快 （没有where条件），有where条件，则count(id)
				- 优化关联查询，优化子查询
				- 优化group by distinct
				- 优化limit union
		- 存储引擎的优化
			- innodb尽量使用，使用独立空间，行锁
			- myisam
		- 数据表结构设计的优化
			- 分区（对用户透明）partition by，分库分表操作（数据量比较大，将活跃的数据拆分出来）--水平拆分，垂直拆分			
		- 数据库服务器架构的优化
			- 主从复制
			- 读写分离
			- 双主热备		
			- mysql负载均衡：lvs，数据库中间件mycat
	2. 优化方案

